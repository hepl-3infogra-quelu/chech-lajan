!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){"use strict";var b=(a("underscore"),a("jquery")),c=a("fastclick"),d=a("./router");window.app.now=new Date,b(function(){c(document.body),console.log(window.app),console.log("ready."),window.app.router=new d,window.app.router.start()})},{"./router":4,fastclick:"fastclick",jquery:"jquery",underscore:"underscore"}],2:[function(a,b){"use strict";var c=(a("underscore"),a("jquery"),a("backbone"));c.$=a("jquery"),b.exports=c.Collection.extend({url:"/api/terminals",model:a("../models/terminal"),parse:function(a){return a.data}})},{"../models/terminal":3,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],3:[function(a,b){"use strict";var c=(a("underscore"),a("jquery"),a("backbone"));c.$=a("jquery"),b.exports=c.Model.extend({urlRoot:"api/terminals",parse:function(a){return a.data&&a.url?oReponse.data:oReponse}})},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],4:[function(a,b){"use strict";var c=(a("underscore"),a("jquery"),a("backbone"));c.$=a("jquery");var d,e=a("./views/main"),f=a("./views/header"),g=a("./views/terminals-list"),h=a("./collections/terminals");b.exports=c.Router.extend({views:{},routes:{"terminals/list":"showTerminalsList","terminals/map":"showTerminalsMap","terminals/details/:id":"showTerminalsDetails","":"showTerminalsList"},start:function(){(this.views.main=new e).render(),this.views.main.initHeader((this.views.header=new f).render()),jeolok.getCurrentPosition({enableHighAccuracy:!0},function(a,b){console.log(b),a&&(console.log("oups.."),d={lattitude:50.84274,longitude:4.35154})}),c.history.start({pushState:!0})},showTerminalsList:function(){console.log("showTerminalsList");var a=this;this.views.main.loading(!0);var b=h(d);(this.views.list=new g(b)).collection.fetch({data:{latitude:d.latitude,longitude:d.longitude},success:function(){console.log("collection fetch done"),a.views.main.clearContent(),a.views.main.initList(a.views.list.render()),a.views.main.loading(!1)}})},showTerminalsMap:function(){console.log("showTerminalsMap")},showTerminalsDetails:function(){console.log("showTerminalsDetails")}})},{"./collections/terminals":2,"./views/header":5,"./views/main":6,"./views/terminals-list":8,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],5:[function(a,b){"use strict";var c=(a("underscore"),a("jquery")),d=a("backbone");d.$=a("jquery");var e;b.exports=d.View.extend({el:"<header />",constructor:function(){d.View.apply(this,arguments),console.log("HeaderView:init()"),e=c("#tpl-header").remove().text()},events:{"click #reload":"reloadButtonClicked","click #list":"listButtonClicked"},render:function(){return this.$el.html(e),this}})},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],6:[function(a,b){"use strict";var c=(a("underscore"),a("jquery")),d=a("backbone");d.$=a("jquery"),b.exports=d.View.extend({el:"body",$el:c("body"),constructor:function(){d.View.apply(this,arguments),console.log("MainView:init()")},loading:function(a){console.log(a?"Chargement...":"Fini !")},clearContent:function(){console.log("TODO: clearContent")},initHeader:function(a){this.$el.find("#main").append(a.$el)},initList:function(){console.log("TODO: initList")}})},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],7:[function(a,b){"use strict";var c=(a("underscore"),a("jquery")),d=a("backbone");d.$=a("jquery");var e;b.exports=d.View.extend({el:"<li />",constructor:function(a){d.View.apply(this,arguments),this.model=a,console.log("TerminalListElementView:init()"),e=c("#tpl-result-list-elt").remove().text()},events:{"click a":"showTerminal"},render:function(){var a=this.model.get("bank");return this.$el.html(e).find("a").find("img").attr("src","images/banks/"+a.icon+".png").attr("alt",a.name).end().find("strong").css("color","#"+a.color).text(a.name).end().find("span").text(1e3*parseFloat(this.model.distance)+"m"),this},showTerminal:function(a){a.preventDefault(),console.log("TODO: showTerminal")}})},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],8:[function(a,b){"use strict";var c=(a("underscore"),a("jquery")),d=a("backbone");d.$=a("jquery");var e,f=a("./terminals-list-element");b.exports=d.View.extend({el:"<div />",constructor:function(){d.View.apply(this,arguments),console.log("TerminalListView:init()"),e=c("#tpl-result").remove().text()},events:{},render:function(){this.$el.attr("class","overlay").html(e);var a=this.$em.find("ul");return this.collection.each(function(b){a.append(new f(b).render().$el)}),this}})},{"./terminals-list-element":7,backbone:"backbone",jquery:"jquery",underscore:"underscore"}]},{},[1]);
//# sourceMappingURL=app.min.js.map